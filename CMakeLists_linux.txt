
SET( CMAKE_CXX_FLAGS  "${CMAKE_CXX_FLAGS} -Wall -pedantic -s -O2" )

include_directories (
    ${GOALIE_SOURCE_DIR}
    ${GOALIE_SOURCE_DIR}/linux
)

link_directories (
    # OpenCV wrapper to rapicam
    ${GOALIE_SOURCE_DIR}/linux/raspicamcv 
    
    # libwebsock
    /usr/local/lib
    
    # Raspicam related libs
    /opt/vc/lib/    
)

SET (OPENCV-VER "")

add_executable (follow 
    ${GOALIE_SOURCE_DIR}/linux/follow.cpp
    ${GOALIE_SOURCE_DIR}/linux/serial/serial.cc
    ${GOALIE_SOURCE_DIR}/linux/serial/unix.cc
    ${GOALIE_SOURCE_DIR}/hsvfilter.cpp
    ${GOALIE_SOURCE_DIR}/balldetector.cpp
)

add_executable (webui
    ${GOALIE_SOURCE_DIR}/linux/webui.cpp
)

target_link_libraries (webui
    websock
)

target_link_libraries (follow
    opencv_core${OPENCV-VER}
    opencv_imgproc${OPENCV-VER}
    opencv_highgui${OPENCV-VER}
    ncurses
    
    # OpenCV wrapper to rapicam
    raspicamcv
    
    # Raspicam related libs
    mmal_core
    mmal
    mmal_util
    vcos
    bcm_host
) 